/*! ng-i18next - 0.6.0 - 2016-07-27 - Copyright (c) 2016 Andre Meyering; Licensed MIT*/!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.ngI18next=t.ngI18next||{})}(this,function(t){"use strict";var n=function(){function t(t){var n=this;this.$interpolate=t,this.restrict="A",this.scope=!1,this.controller="NgI18nextController",this.link=function(t,i,e,s){function r(t){if(angular.isDefined(t)){if(l=t.replace(/^\s+|\s+$/g,""),""===l)return o();s.localize(l)}}function o(){if(!u){var n=a.$interpolate(i.html());t.$watch(n,r),u=!0}}var a=n,l="",u=!1;l=e.ngI18next.replace(/^\s+|\s+$/g,""),l.indexOf("__once__")<0?e.$observe("ngI18next",r):(l=l.split("__once__").join(""),s.localize(l,!0)),t.$on("i18nextLanguageChange",function(){s.localize(l)})}}return t.factory=function(){var n=function(n){return new t(n)};return n.$inject=["$interpolate"],n},t}(),i=function(){function t(t){var n=this;this.$compile=t,this.restrict="A",this.scope=!1,this.link=function(t,i,e){var s=i.clone();s.attr("ng-i18next","__once__"+e.boI18next),s.removeAttr("bo-i18next"),i.replaceWith(n.$compile(s)(t))}}return t.factory=function(){var n=function(n){return new t(n)};return n.$inject=["$compile"],n},t}(),e=function(){function t(t,n,i,e,s,r,o){this.$scope=t,this.$element=n,this.$compile=i,this.$parse=e,this.$interpolate=s,this.$sanitize=r,this.$i18next=o}return t.prototype.localize=function(t,n){for(var i=t.split(";"),e=0;e<i.length;++e)t=i[e].trim(),""!==t&&this.parse(t,n)},t.prototype.parse=function(t,n){var i=this.parseKey(t);this.argsUnregister&&this.argsUnregister(),this.stringUnregister&&this.stringUnregister(),n||(this.argsUnregister=this.$scope.$watch(i.i18nOptions,this.render,!0)),this.render(i,n)},t.prototype.parseKey=function(t){var n,i={attr:"text"},e="{}";return t=t.trim(),0===t.indexOf("[")&&(n=t.split("]"),i=this.parseOptions(n.shift().substr(1).trim()),t=n.join("]")),0===t.indexOf("(")&&t.indexOf(")")>=0&&(n=t.split(")"),t=n.pop().trim(),e=n.join(")").substr(1).trim()),{key:t,options:i,i18nOptions:this.$parse(e)}},t.prototype.parseOptions=function(t){for(var n={attr:"text"},i=t.split(":"),e=0;e<i.length;++e)"i18next"===i[e]?n[i[e]]=!0:n.attr=i[e];return n},t.prototype.render=function(t,n){if(angular.isDefined(this)&&angular.isDefined(this.$scope)){var i=t.i18nOptions(this.$scope);i.sprintf&&(i.postProcess="sprintf"),"html"===t.options.attr&&angular.forEach(i,function(t,n){var e=void 0,s=this.$sanitize(t),r=Number(t);e="number"==typeof r?r:s,i[n]=e},this);var e=this.$i18next.t(t.key,i);if(angular.isDefined(e)){if("html"===t.options.attr)return this.$element.empty().append(e),void this.$compile(this.$element.contents())(this.$scope);this.stringUnregister&&this.stringUnregister();var s=this.$element.text.bind(this.$element);"text"!==t.options.attr&&(s=this.$element.attr.bind(this.$element,t.options.attr));var r=this.$interpolate(e);n||(this.stringUnregister=this.$scope.$watch(r,s)),s(r(this.$scope))}}},t.$inject=["$scope","$element","$compile","$parse","$interpolate","$sanitize","$i18next"],t}(),s=function(){function t(){}return t.factory=function(){var t=function(t){function n(n,i){return t.t(n,i)}return n.$stateful=!0,n};return t.$inject=["$i18next"],t},t}(),r=function(){function t(t,n,i,e,s){var r=this;this.$rootScope=t,this.$timeout=n,this.$q=i,this.initOptions={},this.tOptions={},this.i18nextModules=[],this.localesLoaded=!1,this.translations={},this.i18n=window.i18next,this.initOptions=e,this.i18nextModules=s,this.init(this.initOptions,this.i18nextModules).then(function(t){r.localesLoaded=!0,r.$rootScope.$broadcast("i18nextLanguageChange",r.i18n.language),console.log("i18nextLanguageChange: "+r.i18n.language)})}return t.prototype.init=function(t,n){var i=this,e=this.$q.defer();if(window.i18next&&angular.isDefined(n))this.i18n=window.i18next,angular.forEach(n,function(t){if(angular.isDefined(t))i.i18n.use(t);else{var n=new Error("[ng-i18next] Can't find one or more  of the requested i18next modules! Please refer to i18next.");i.handleError(n),e.reject(n)}}),this.i18n.init(t,function(t,n){"undefined"==typeof n?(n=t,t=void 0):angular.isDefined(t)&&"undefined"!=typeof t&&null!==t&&i.handleError(t),e.resolve("ng-i18next initialized")});else{var s=new Error("[ng-i18next] Can't find i18next and/or i18next modules! Please refer to i18next.");this.handleError(s),e.reject(s)}return e.promise},t.prototype.t=function(t,n){var i,e,s=angular.isDefined(n),r=s&&angular.isDefined(n.ns),o=angular.isDefined(this.initOptions)&&angular.isDefined(this.initOptions.ns),a=this.initOptions;return angular.isUndefined(r)&&o&&(a=angular.extend({},this.initOptions),a.ns=a.defaultNS),i=s?angular.extend({},a,n):a,e=i.lng,this.translate(t,i,s),angular.isDefined(e)&&this.localesLoaded?this.translations[e][t]:this.translations.auto[t]},t.prototype.changeLanguage=function(t){var n=this;this.initOptions.lng!==t&&this.i18n.language!==t&&(this.initOptions.lng=t,this.i18n.changeLanguage(t,function(t,i){n.$rootScope.$broadcast("i18nextLanguageChange",n.i18n.language)}))},t.prototype.changeOptions=function(t){angular.isDefined(t)&&(this.initOptions=t)},t.prototype.translate=function(t,n,i){var e=angular.isDefined(n)&&i?n:this.initOptions,s=e.lng||"auto";angular.isUndefined(this.translations[s])&&(this.translations[s]={}),angular.isUndefined(this.i18n)?this.translations[s][t]=angular.isDefined(e.defaultValue)?e.defaultValue:t:(angular.isUndefined(this.translations[s][t])||i)&&(this.translations[s][t]=this.i18n.t(t,e))},t.prototype.handleError=function(t){var n=angular.isDefined(t.message)?t.message:t[0];console.log(n)},t}(),o=function(){function t(){var t=this;this.options={},this.modules=[],this.$get=function(n,i,e){return new r(n,i,e,t.options,t.modules)},this.$get.$inject=["$rootScope","$timeout","$q"]}return t.prototype.init=function(t,n){this.options=t,this.modules=n},t}();angular.module("jm.i18next",["ng","ngSanitize"]).provider("$i18next",o).directive("ngI18next",n.factory()).directive("boI18next",i.factory()).controller("NgI18nextController",e).filter("i18next",s.factory()),t.I18nProvider=o,Object.defineProperty(t,"__esModule",{value:!0})});